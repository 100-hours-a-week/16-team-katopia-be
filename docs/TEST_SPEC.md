# Test Scenario Specification

- **테스트 목적**: 핵심 비즈니스 규칙의 정상 동작 및 예외 처리를 검증한다.
- **테스트 관점**: 정상 흐름과 실패 흐름을 분리한다.
- **책임 범위**: 서비스/도메인 로직 중심. 외부 연동(소셜 OAuth2, 인프라, S3 등)과 실제 DB 영속성은 제외한다.
- **실행 원칙**: 외부 시스템은 Mock/Stub. 테스트는 독립 실행, 종료 후 상태 초기화.

## 상태 표시
- ⬜ 미작성
- 🟡 작성 중
- ✅ 완료
- 🔴 보류/제외

## 우선순위
- High: 핵심 플로우/치명적 장애로 직결
- Medium: 주요 기능이지만 대체 가능/부분 장애
- Low: 부가 기능/경계 확인

## 범위/제외
- **포함**: 회원/게시글/댓글/검색/토큰 재발급·로그아웃 비즈니스 로직
- **제외**: OAuth2 로그인 리디렉션/핸들러, DB 스키마/인덱스 검증, 외부 API, 실제 보안 필터 체인

## 테스트 시나리오

### 1) 회원(Member)
| TC ID | 상태 | 우선순위 | 설명 | GIVEN | WHEN | THEN |
|---|---|---|---|---|---|---|
| TC-MEMBER-01 | ⬜ | Medium | 닉네임 중복 확인(미중복) | 동일 닉네임이 없음 | 닉네임 중복 검증 요청 | 중복 아님 응답 반환 |
| TC-MEMBER-02 | ⬜ | Medium | 닉네임 중복 확인(중복) | 동일 닉네임이 존재 | 닉네임 중복 검증 요청 | 중복 응답 반환 |
| TC-MEMBER-03 | ⬜ | High | 회원가입 성공 | 유효한 등록 토큰, 유효 닉네임 | 회원가입 요청 | ACTIVE 전환 + AT/RT 발급 |
| TC-MEMBER-04 | ⬜ | Medium | 회원가입 실패(닉네임 형식 오류) | 유효 등록 토큰 | 닉네임 규칙 위반 | 400 오류 반환 |
| TC-MEMBER-05 | ⬜ | Medium | 회원가입 실패(중복 닉네임) | 유효 등록 토큰, 중복 닉네임 | 회원가입 요청 | 409 오류 반환 |
| TC-MEMBER-06 | ⬜ | High | 공개 프로필 조회 성공 | ACTIVE 회원 존재 | /api/members/{id} 조회 | 프로필 응답 반환 |
| TC-MEMBER-07 | ⬜ | High | 내 프로필 조회 성공 | 인증된 사용자 | /api/members/me 조회 | 상세 프로필 반환 |
| TC-MEMBER-08 | ⬜ | High | 프로필 수정 성공 | 인증된 사용자, 유효 요청 | 프로필 수정 | 반영된 프로필 반환 |
| TC-MEMBER-09 | ⬜ | Medium | 프로필 수정 실패(닉네임 중복) | 인증된 사용자, 중복 닉네임 | 프로필 수정 | 409 오류 반환 |
| TC-MEMBER-10 | ⬜ | High | 회원 탈퇴 성공 | 인증된 사용자 | 탈퇴 요청 | 204 응답 |

### 2) 게시글(Post)
| TC ID | 상태 | 우선순위 | 설명 | GIVEN | WHEN | THEN |
|---|---|---|---|---|---|---|
| TC-POST-01 | ⬜ | High | 게시글 작성 성공 | 인증된 사용자, 유효 본문/이미지/태그 | 게시글 작성 | 201 응답 |
| TC-POST-02 | ⬜ | Medium | 게시글 작성 실패(본문 없음) | 인증된 사용자 | 빈 본문 | 400 오류 반환 |
| TC-POST-03 | ⬜ | Medium | 게시글 작성 실패(본문 200자 초과) | 인증된 사용자 | 긴 본문 | 400 오류 반환 |
| TC-POST-04 | ⬜ | Medium | 게시글 작성 실패(이미지 수량 오류) | 인증된 사용자 | 이미지 0장/4장 | 400 오류 반환 |
| TC-POST-05 | ⬜ | Medium | 게시글 작성 실패(태그 길이 오류) | 인증된 사용자 | 태그 길이 위반 | 400 오류 반환 |
| TC-POST-06 | ⬜ | High | 게시글 목록 조회(커서) | 게시글 존재 | size/after로 조회 | 최신순 목록 + nextCursor |
| TC-POST-07 | ⬜ | High | 게시글 상세 조회 성공 | 게시글 존재 | 상세 조회 | 상세 응답 반환 |
| TC-POST-08 | ⬜ | High | 게시글 수정 성공 | 작성자 본인 | 유효 수정 요청 | 수정 응답 반환 |
| TC-POST-09 | ⬜ | High | 게시글 수정 실패(타인) | 작성자 아님 | 수정 요청 | 403 오류 반환 |
| TC-POST-10 | ⬜ | High | 게시글 삭제 성공 | 작성자 본인 | 삭제 요청 | 204 응답 |
| TC-POST-11 | ⬜ | High | 게시글 삭제 실패(타인) | 작성자 아님 | 삭제 요청 | 403 오류 반환 |
| TC-POST-12 | ⬜ | Medium | 게시글 좋아요 성공 | 인증된 사용자 | 좋아요 요청 | 201 응답 |
| TC-POST-13 | ⬜ | Medium | 게시글 좋아요 실패(중복) | 이미 좋아요 상태 | 좋아요 요청 | 409 오류 반환 |
| TC-POST-14 | ⬜ | Medium | 게시글 좋아요 해제 성공 | 좋아요 상태 | 해제 요청 | 204 응답 |
| TC-POST-15 | ⬜ | Medium | 게시글 좋아요 해제 실패(기록 없음) | 미좋아요 상태 | 해제 요청 | 404 오류 반환 |

### 3) 댓글(Comment)
| TC ID | 상태 | 우선순위 | 설명 | GIVEN | WHEN | THEN |
|---|---|---|---|---|---|---|
| TC-COMMENT-01 | ⬜ | High | 댓글 작성 성공 | 인증된 사용자, 게시글 존재 | 댓글 작성 | 201 응답 |
| TC-COMMENT-02 | ⬜ | Medium | 댓글 작성 실패(본문 없음) | 인증된 사용자 | 빈 본문 | 400 오류 반환 |
| TC-COMMENT-03 | ⬜ | Medium | 댓글 작성 실패(본문 200자 초과) | 인증된 사용자 | 긴 본문 | 400 오류 반환 |
| TC-COMMENT-04 | ⬜ | High | 댓글 목록 조회(커서) | 댓글 존재 | size/after로 조회 | 최신순 목록 + nextCursor |
| TC-COMMENT-05 | ⬜ | High | 댓글 수정 성공 | 작성자 본인 | 수정 요청 | 200 응답 |
| TC-COMMENT-06 | ⬜ | High | 댓글 수정 실패(타인) | 작성자 아님 | 수정 요청 | 403 오류 반환 |
| TC-COMMENT-07 | ⬜ | High | 댓글 삭제 성공 | 작성자 본인 | 삭제 요청 | 204 응답 |
| TC-COMMENT-08 | ⬜ | High | 댓글 삭제 실패(타인) | 작성자 아님 | 삭제 요청 | 403 오류 반환 |
| TC-COMMENT-09 | ⬜ | Medium | 댓글 수정 실패(댓글 없음) | 댓글 미존재 | 수정 요청 | 404 오류 반환 |
| TC-COMMENT-10 | ⬜ | Medium | 댓글 삭제 실패(댓글 없음) | 댓글 미존재 | 삭제 요청 | 404 오류 반환 |

### 4) 검색(Search)
| TC ID | 상태 | 우선순위 | 설명 | GIVEN | WHEN | THEN |
|---|---|---|---|---|---|---|
| TC-SEARCH-01 | ⬜ | High | 사용자 검색 성공(query prefix) | ACTIVE 사용자 존재 | /api/search/users?query=... | 최신순 사용자 목록 + nextCursor |
| TC-SEARCH-02 | ⬜ | Medium | 사용자 검색 실패(검색어 길이) | 검색어 길이<2 or >100 | 검색 요청 | 400 오류 반환 |
| TC-SEARCH-03 | ⬜ | Medium | 사용자 검색 필터 적용(명시 필터) | height/weight/gender 입력 | 검색 요청 | 조건에 맞는 사용자만 반환 |
| TC-SEARCH-04 | ⬜ | Medium | 사용자 검색 필터 자동 적용(인증+프로필 존재) | 인증 사용자 프로필 존재 | query만 요청 | 프로필 기반 필터 적용 |
| TC-SEARCH-05 | ⬜ | Low | 사용자 검색 필터 미적용(인증 없음/프로필 없음) | 인증 없음 또는 프로필 없음 | query만 요청 | 필터 없이 결과 반환 |
| TC-SEARCH-06 | ⬜ | High | 게시글 검색 성공(본문 OR 태그) | 본문/태그에 매칭되는 글 존재 | /api/search/posts?query=... | 합집합 결과 + nextCursor |
| TC-SEARCH-07 | ⬜ | Medium | 게시글 검색 실패(검색어 길이) | 검색어 길이<2 or >100 | 검색 요청 | 400 오류 반환 |
| TC-SEARCH-08 | ⬜ | Medium | 게시글 검색 필터 적용(명시 필터) | height/weight/gender 입력 | 검색 요청 | 작성자 조건 매칭된 글만 반환 |
| TC-SEARCH-09 | ⬜ | Medium | 게시글 검색 필터 자동 적용(인증+프로필 존재) | 인증 사용자 프로필 존재 | query만 요청 | 프로필 기반 필터 적용 |
| TC-SEARCH-10 | ⬜ | Low | 게시글 검색 필터 미적용(인증 없음/프로필 없음) | 인증 없음 또는 프로필 없음 | query만 요청 | 필터 없이 결과 반환 |
| TC-SEARCH-11 | ⬜ | Medium | 커서/페이지 사이즈 검증 | after/size 형식 오류 | 검색 요청 | 400 오류 반환 |

### 5) 토큰 재발급/로그아웃(Auth)
| TC ID | 상태 | 우선순위 | 설명 | GIVEN | WHEN | THEN |
|---|---|---|---|---|---|---|
| TC-AUTH-01 | ⬜ | High | RT로 토큰 재발급 성공 | 유효 RT 쿠키 | POST /api/auth/tokens | AT/RT 재발급 응답 |
| TC-AUTH-02 | ⬜ | Medium | 토큰 재발급 실패(RT 없음) | RT 쿠키 없음 | POST /api/auth/tokens | 401 오류 반환 |
| TC-AUTH-03 | ⬜ | Medium | 토큰 재발급 실패(RT 만료/위조) | 유효하지 않은 RT | POST /api/auth/tokens | 401 오류 반환 |
| TC-AUTH-04 | ⬜ | Medium | 로그아웃 성공 | 인증 상태 | DELETE /api/auth/tokens | RT 쿠키 만료 응답 |

### 6) 보안/예외(경계)
| TC ID | 상태 | 우선순위 | 설명 | GIVEN | WHEN | THEN |
|---|---|---|---|---|---|---|
| TC-SEC-01 | 🔴 | High | 인증 필요 API 접근 차단 | 인증 없음 | 보호 리소스 접근 | 401 응답 |
| TC-SEC-02 | 🔴 | High | 권한 없는 리소스 접근 차단 | 타인 리소스 | 수정/삭제 요청 | 403 응답 |
| TC-ERR-01 | 🔴 | Medium | 존재하지 않는 경로 처리 | 미존재 경로 | 요청 | 404 응답 |
| TC-ERR-02 | 🔴 | Medium | 메서드 미지원 처리 | 지원하지 않는 HTTP 메서드 | 요청 | 405 응답 |

